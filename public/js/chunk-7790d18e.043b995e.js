(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7790d18e"],{"2d08":function(e,t,o){"use strict";o.r(t);var a=o("7a23"),l={class:"container"},n={class:"fw-bolder my-2"},c=Object(a["createElementVNode"])("span",{class:"fs-6 text-gray-400 fw-bold ms-1"},null,-1),r={class:""},i={class:"row"},d={key:0,class:"col-md-6"},s={class:"form-label fs-6 fw-bolder text-dark"},m={class:"fv-plugins-message-container"},u={class:"fv-help-block"},p={class:"col-md-12"},b={class:"form-label fs-6 fw-bolder text-dark"},f={class:"fv-plugins-message-container"},g={class:"fv-help-block"},v={class:"row"},j={class:"col-md-6"},O={class:"form-label fs-6 fw-bolder text-dark"},V={class:"fv-plugins-message-container"},N={class:"fv-help-block"},E={class:"col-md-6"},w={class:"form-label fs-6 fw-bolder text-dark"},h={class:"fv-plugins-message-container"},y={class:"fv-help-block"},k={class:"row"},C={class:"col-md-12"},x={class:"form-label fs-6 fw-bolder text-dark"},S={class:"fv-plugins-message-container"},I={class:"fv-help-block"},B={class:"row"},_={class:"col-md-6"},D={class:"form-label fs-6 fw-bolder text-dark"},U={class:"fv-plugins-message-container"},G={class:"fv-help-block"},M={class:"col-md-6"},A={class:"form-label fs-6 fw-bolder text-dark"},F={class:"fv-plugins-message-container"},$={class:"fv-help-block"},L={class:"row"},R={class:"col-md-6"},P={class:"form-label fs-6 fw-bolder text-dark"},T={class:"col-md-6"},q={class:"form-label fs-6 fw-bolder text-dark"},z={"data-kt-flag":"flags/united-states.svg",value:"A"},J={"data-kt-flag":"flags/united-kingdom.svg",value:"C"},H={class:"row mt-5"},K={class:"col-md-6 text-center"},Q={class:"image-input image-input-outline","data-kt-image-input":"true",style:{"background-image":"url(media/defaults/blank.png)"}},W=Object(a["createElementVNode"])("label",{class:"form-label fs-6 fw-bolder text-dark"},"Logo",-1),X={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change logo"},Y=Object(a["createElementVNode"])("i",{class:"bi bi-pencil-fill fs-7"},null,-1),Z=Object(a["createElementVNode"])("input",{type:"hidden",name:"logo_remove"},null,-1),ee=Object(a["createElementVNode"])("i",{class:"bi bi-x fs-2"},null,-1),te=[ee],oe=Object(a["createElementVNode"])("div",{class:"form-text"},"Allowed file types: png, jpg, jpeg.",-1),ae={class:"col-md-6 text-center"},le={class:"image-input image-input-outline","data-kt-image-input":"true",style:{"background-image":"url(media/defaults/blank.png)"}},ne=Object(a["createElementVNode"])("label",{class:"form-label fs-6 fw-bolder text-dark"},"Logo doc",-1),ce={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change logodoc"},re=Object(a["createElementVNode"])("i",{class:"bi bi-pencil-fill fs-7"},null,-1),ie=Object(a["createElementVNode"])("input",{type:"hidden",name:"logodoc_remove"},null,-1),de=Object(a["createElementVNode"])("i",{class:"bi bi-x fs-2"},null,-1),se=[de],me=Object(a["createElementVNode"])("div",{class:"form-text"},"Allowed file types: png, jpg, jpeg.",-1),ue={class:"row"},pe={class:"col-md-12"},be={class:"text-center"},fe={ref:"submitButton",type:"submit",class:"btn btn-lg btn-primary mb-5"},ge={class:"indicator-label"},ve={class:"indicator-progress"},je=Object(a["createElementVNode"])("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Oe(e,t,o,ee,de,Oe){var Ve=Object(a["resolveComponent"])("el-option"),Ne=Object(a["resolveComponent"])("el-select"),Ee=Object(a["resolveComponent"])("ErrorMessage"),we=Object(a["resolveComponent"])("Select"),he=Object(a["resolveComponent"])("Field"),ye=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",l,[Object(a["createElementVNode"])("h3",n,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.title)+" ",1),c]),Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(ye,{id:"companyCU",class:"form w-100","validation-schema":e.vcompanies,onSubmit:e.onSubmitCompany},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("div",i,["companiesUpdate"===e.route.name?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[Object(a["createElementVNode"])("label",s,Object(a["toDisplayString"])(e.$t("iid")),1),Object(a["createVNode"])(Ne,{modelValue:e.form.id,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.id=t}),class:"form-control form-control-lg form-control-solid",filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter a keyword","remote-method":e.selectCompanies,loading:e.inputId.loading,onChange:e.setCompany},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.inputId.options,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])(Ve,{key:e.id,label:e.id.toString(),value:e.id},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(e.id+" "+e.name),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","remote-method","loading","onChange"]),Object(a["createElementVNode"])("div",m,[Object(a["createElementVNode"])("div",u,[Object(a["createVNode"])(Ee,{name:"id"})])])])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("label",b,Object(a["toDisplayString"])(e.$t("icompaniesgroup")),1),Object(a["createVNode"])(we,{valueModel:e.companiesGroupSelect,"onUpdate:valueModel":t[1]||(t[1]=function(t){return e.companiesGroupSelect=t}),"resource-api":e.companiesGroupsApi,"item-label":e.labelCompaniesGroup,"add-button-plus":!1,onEmitModalValue:e.emitModalValue},null,8,["valueModel","resource-api","item-label","onEmitModalValue"]),Object(a["createVNode"])(he,{modelValue:e.form.companyGroupId,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.companyGroupId=t}),class:"form-control form-control-lg form-control-solid",type:"hidden",name:"companyGroupId",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",f,[Object(a["createElementVNode"])("div",g,[Object(a["createVNode"])(Ee,{name:"companyGroupId"})])])])]),Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",j,[Object(a["createElementVNode"])("label",O,Object(a["toDisplayString"])(e.$t("iname")),1),Object(a["createVNode"])(he,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.name=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("div",N,[Object(a["createVNode"])(Ee,{name:"name"})])])]),Object(a["createElementVNode"])("div",E,[Object(a["createElementVNode"])("label",w,Object(a["toDisplayString"])(e.$t("icif")),1),Object(a["createVNode"])(he,{modelValue:e.form.cif,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.cif=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"cif",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",y,[Object(a["createVNode"])(Ee,{name:"cif"})])])])]),Object(a["createElementVNode"])("div",k,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("label",x,Object(a["toDisplayString"])(e.$t("iaddress")),1),Object(a["createVNode"])(he,{modelValue:e.form.address,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.address=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"address",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",S,[Object(a["createElementVNode"])("div",I,[Object(a["createVNode"])(Ee,{name:"address"})])])])]),Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("label",D,Object(a["toDisplayString"])(e.$t("iemail")),1),Object(a["createVNode"])(he,{modelValue:e.form.email,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.email=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("div",G,[Object(a["createVNode"])(Ee,{name:"email"})])])]),Object(a["createElementVNode"])("div",M,[Object(a["createElementVNode"])("label",A,Object(a["toDisplayString"])(e.$t("iwebsite")),1),Object(a["createVNode"])(he,{modelValue:e.form.website,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.website=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"website",autocomplete:"off"},null,8,["modelValue"]),Object(a["createElementVNode"])("div",F,[Object(a["createElementVNode"])("div",$,[Object(a["createVNode"])(Ee,{name:"website"})])])])]),Object(a["createElementVNode"])("div",L,[Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("label",P,Object(a["toDisplayString"])(e.$t("iphone")),1),Object(a["createVNode"])(he,{modelValue:e.form.phone,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.phone=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("label",q,Object(a["toDisplayString"])(e.$t("istatus")),1),Object(a["createVNode"])(he,{modelValue:e.form.status,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.status=t}),as:"select",name:"status",class:"form-select form-select-solid form-select-lg"},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("option",z,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.$t("istatusactive")),1)]),Object(a["createElementVNode"])("option",J,[Object(a["createElementVNode"])("b",null,Object(a["toDisplayString"])(e.$t("istatuscancel")),1)])]})),_:1},8,["modelValue"])])]),Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",Q,[Object(a["createElementVNode"])("div",{class:"image-input-wrapper w-125px h-125px",style:Object(a["normalizeStyle"])(e.form.logo?"background-image: url("+e.form.logo+")":"background-image: url(media/defaults/blank.png)")},null,4),W,Object(a["createElementVNode"])("label",X,[Y,Object(a["createElementVNode"])("input",{type:"file",name:"logo",accept:".png, .jpg, .jpeg",onChange:t[10]||(t[10]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e.previewImage&&e.previewImage.apply(e,t)})},null,32),Z]),Object(a["createElementVNode"])("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove logo",onClick:t[11]||(t[11]=function(t){return e.removeImage("logo")})},te)]),oe]),Object(a["createElementVNode"])("div",ae,[Object(a["createElementVNode"])("div",le,[Object(a["createElementVNode"])("div",{class:"image-input-wrapper w-125px h-125px",style:Object(a["normalizeStyle"])(e.form.logodoc?"background-image: url("+e.form.logodoc+")":"background-image: url(media/defaults/blank.png)")},null,4),ne,Object(a["createElementVNode"])("label",ce,[re,Object(a["createElementVNode"])("input",{type:"file",name:"logodoc",accept:".png, .jpg, .jpeg",onChange:t[12]||(t[12]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e.previewImage&&e.previewImage.apply(e,t)})},null,32),ie]),Object(a["createElementVNode"])("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove logo doc",onClick:t[13]||(t[13]=function(t){return e.removeImage("logodoc")})},se)]),me])]),Object(a["createElementVNode"])("div",ue,[Object(a["createElementVNode"])("div",pe,[Object(a["createElementVNode"])("div",be,[Object(a["createElementVNode"])("button",fe,[Object(a["createElementVNode"])("span",ge,Object(a["toDisplayString"])(e.$t("btnSave")),1),Object(a["createElementVNode"])("span",ve,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.$t("wait"))+" ",1),je])],512)])])])]})),_:1},8,["validation-schema","onSubmit"])])])}var Ve=o("7bb1"),Ne=o("506a"),Ee=o("fd34"),we=o("0238"),he=o("16d6"),ye=o("6c02"),ke={class:"row align-items-center"},Ce={key:0,class:"col-md-2 text-center"};function xe(e,t,o,l,n,c){var r=Object(a["resolveComponent"])("el-option"),i=Object(a["resolveComponent"])("el-select"),d=Object(a["resolveComponent"])("PlusIcon"),s=Object(a["resolveComponent"])("el-dialog");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("div",ke,[Object(a["createElementVNode"])("div",{class:Object(a["normalizeClass"])(e.style_select)},[Object(a["createVNode"])(i,{class:"form-control form-control-lg form-control-solid",modelValue:e.valueItemSelected,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.valueItemSelected=t}),filterable:"",placeholder:"Please enter a keyword",onChange:e.valueModal},{default:Object(a["withCtx"])((function(){return[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.inputValue.options,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])(r,{key:t.id,label:t[e.itemLabel],value:t.id},{default:Object(a["withCtx"])((function(){return[Object(a["createElementVNode"])("span",null,Object(a["toDisplayString"])(t[e.itemLabel]),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","onChange"])],2),e.addButtonPlus?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",Ce,[Object(a["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(t){return e.openDialog=!0}),class:"btn btn-success btn-sm font-weight-bold mr-2"},[Object(a["createVNode"])(d)])])):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])(s,{modelValue:e.openDialog,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.openDialog=t}),width:"40%",onClose:e.resetModal},null,8,["modelValue","onClose"])],64)}const Se={class:"svg-icon svg-icon-primary svg-icon-sm"},Ie=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},[Object(a["createElementVNode"])("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Object(a["createElementVNode"])("rect",{fill:"#000000",x:"4",y:"11",width:"16",height:"2",rx:"1"}),Object(a["createElementVNode"])("rect",{fill:"#000000",opacity:"0.3",transform:"translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000) ",x:"4",y:"11",width:"16",height:"2",rx:"1"})])],-1),Be=[Ie];function _e(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("span",Se,Be)}var De=o("6b0d"),Ue=o.n(De);const Ge={},Me=Ue()(Ge,[["render",_e]]);var Ae=Me,Fe=Object(a["defineComponent"])({props:{itemModel:String,resourceApi:String,itemLabel:String,addButtonPlus:Boolean,valueModel:String},components:{PlusIcon:Ae},setup:function(e,t){var o=t.emit,l=Object(a["ref"])(!1),n=Object(a["ref"])({options:[]}),c=Object(a["ref"])(""),r=function(){he["a"].get("/api/"+e.resourceApi).then((function(e){var t=e.data;n.value.options=t}))},i=Object(a["ref"])("col-md-6"),d=function(){e.addButtonPlus?i.value="col-md-10":i.value="col-md-6"},s=function(){null!=e.valueModel&&(c.value=e.valueModel)},m=function(e){o("emitModalValue",e)};return Object(a["onMounted"])((function(){r(),d()})),Object(a["onUpdated"])((function(){s()})),{setValues:s,inputValue:n,getResource:r,style_select:i,styles:d,openDialog:l,valueModal:m,valueItemSelected:c}}});const $e=Ue()(Fe,[["render",xe]]);var Le=$e,Re=o("47e2"),Pe=Object(a["defineComponent"])({name:"CompaniesCU",components:{Field:Ve["b"],Form:Ve["c"],ErrorMessage:Ve["a"],Select:Le},props:{typeEvent:String,item:Object},setup:function(e,t){var o,l,n=t.emit,c=Object(Re["a"])({useScope:"global"}).t,r=Object(ye["c"])(),i=Object(a["ref"])(null),d=Object(a["ref"])(""),s=Object(a["ref"])("companiesGroups"),m=Object(a["ref"])("name"),u=Object(a["ref"])(""),p=Object(a["ref"])({name:"",cif:"",address:"",email:"",website:"",phone:"",status:"",logo:"",logodoc:""}),b=Object(a["ref"])({loading:!1,options:[],list:[]}),f=Object(a["ref"])({loading:!1,options:[],list:[]}),g=function(){he["a"].get("/api/companies").then((function(e){var t=e.data;b.value.list=t}))},v=function(e){""!==e?(b.value.loading=!0,setTimeout((function(){b.value.loading=!1,b.value.options=b.value.list.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}))}),200)):b.value.options=[]},j=function(e){var t=b.value.list.find((function(t){return t.id===e}))||{id:"",company_group_id:"",name:"",CIF:"",address:"",email:"",website:"",phone:"",status:"",logo:"",logodoc:""};p.value.name=t.name,p.value.companyGroupId=Number(t.company_group_id),p.value.cif=t.CIF,p.value.address=t.address,p.value.email=t.email,p.value.website=t.website,p.value.phone=t.phone,p.value.status=t.status,p.value.logo=t.logo,p.value.logodoc=t.logodoc},O=function(e){p.value.companyGroupId=e},V=function(e){var t=e.target.files[0];t&&(p.value[e.target.name]=URL.createObjectURL(t),"logo"===e.target.name?o=e.target.files[0]:l=e.target.files[0])},N=function(e){p.value[e]="media/defaults/blank.png","logo"===e?o="":l=""};Object(a["onMounted"])((function(){var t,o,a,l=r.name;if("companiesCreate"===l||"create"===e.typeEvent?d.value=c("createNewBusiness"):"companiesUpdate"!==l&&"update"!==e.typeEvent||(d.value="Actualizar empresa"),e.item&&Object.keys(e.item).length>0&&(u.value=e.item.company_group.name,p.value.id=e.item.id,p.value.companyGroupId=e.item.company_group_id,p.value.name=e.item.name,p.value.cif=e.item.cif,p.value.address=null!==(t=e.item.address)&&void 0!==t?t:"",p.value.email=null!==(o=e.item.email)&&void 0!==o?o:"",p.value.website=e.item.website,p.value.phone=null!==(a=e.item.phone)&&void 0!==a?a:"",p.value.status="",p.value.logo=e.item.logo,p.value.logodoc=e.item.logodoc),"companiesUpdate"===l&&g(),!e.typeEvent){var n="companiesCreate"==l?"companiesCreate":"companiesUpdate";Object(Ee["a"])(n,["companies","companies"],!1)}}));var E=function(){var e=new FormData;e.append("company_group_id",p.value.companyGroupId?p.value.companyGroupId.toString():""),e.append("name",p.value.name),e.append("cif",p.value.cif),e.append("website",p.value.website),e.append("logo",o),e.append("logodoc",l),he["a"].postAttach("/api/companies",e).then((function(e){var t,o=e.data;n("success",o),null===(t=i.value)||void 0===t||t.removeAttribute("data-kt-indicator")})).catch((function(){var e;null===(e=i.value)||void 0===e||e.removeAttribute("data-kt-indicator")}))},w=function(){var e=new FormData;e.append("company_group_id",p.value.companyGroupId?p.value.companyGroupId.toString():""),e.append("name",p.value.name),e.append("cif",p.value.cif),e.append("website",p.value.website),e.append("logo",o),e.append("logodoc",l),he["a"].postAttach("/api/companies/update/"+p.value.id,e).then((function(e){var t,o=e.data;n("success",o),null===(t=i.value)||void 0===t||t.removeAttribute("data-kt-indicator")})).catch((function(){var e;null===(e=i.value)||void 0===e||e.removeAttribute("data-kt-indicator")}))},h=Ne["a"]().shape({name:Ne["c"]().required(Object(we["c"])("rname")).label("Name"),companyGroupId:Ne["c"]().required().label("Companies group"),cif:Ne["c"]().label("CIF/NIF"),address:Ne["c"]().required().label("Address"),email:Ne["c"]().required().email().label("Email"),website:Ne["c"]().url().nullable()}),y=function(){i.value&&(i.value.setAttribute("data-kt-indicator","on"),p.value.id?w():E())};return{route:r,title:d,submitButton:i,vcompanies:h,form:p,logo:o,logodoc:l,inputId:b,inputCompanyG:f,onSubmitCompany:y,createCompanies:E,updateCompanies:w,getCompanies:g,selectCompanies:v,setCompany:j,emitModalValue:O,previewImage:V,removeImage:N,companiesGroupsApi:s,labelCompaniesGroup:m,companiesGroupSelect:u}}});const Te=Ue()(Pe,[["render",Oe]]);t["default"]=Te},fd34:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return c}));var a=o("0613"),l=o("38e0"),n=function(e,t,o){a["a"].dispatch(l["a"].SET_BREADCRUMB_ACTION,{title:e,pageBreadcrumbPath:t,isSearch:o||!1})},c=function(e){a["a"].dispatch(l["a"].SET_BREADCRUMB_ACTION,{title:e})}}}]);
//# sourceMappingURL=chunk-7790d18e.043b995e.js.map