(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc55480"],{b471:function(e,t,a){"use strict";function n(e,t){return"Users"}var o=a("6b0d"),l=a.n(o);const c={},r=l()(c,[["render",n]]);t["a"]=r},dc02:function(e,t,a){"use strict";a.r(t);var n=a("7a23"),o={class:"d-flex flex-wrap flex-stack mb-6"},l={class:"fw-bolder my-2"},c={class:"fs-6 text-gray-400 fw-bold ms-1"},r={class:"d-flex my-2"},s={class:"row g-6 g-xl-9"},i={class:"row g-6 g-xl-9"},d={class:"col-xl-12"},u={class:"card-body border-top p-9"},m={class:"card-body border-top p-9"};function b(e,t,a,b,p,f){var v=Object(n["resolveComponent"])("CardUser"),O=Object(n["resolveComponent"])("el-pagination"),j=Object(n["resolveComponent"])("UserCU"),g=Object(n["resolveComponent"])("el-dialog"),V=Object(n["resolveComponent"])("ChangePassword"),N=Object(n["resolveComponent"])("Offices");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("h3",l,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("user"))+" ",1),Object(n["createElementVNode"])("span",c,"("+Object(n["toDisplayString"])(e.users.length)+")",1)]),Object(n["createElementVNode"])("div",r,[e.create_user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"btn btn-primary",onClick:t[0]||(t[0]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.newUser&&e.newUser.apply(e,t)})},Object(n["toDisplayString"])(e.$t("btnNew")),1)):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",s,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.usersList,(function(a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:a.id,class:"col-xl-4"},[Object(n["createVNode"])(v,{"widget-classes":"card-xl-stretch mb-xl-8",color:"primary",item:a,onProfile:t[1]||(t[1]=function(t){return e.$router.push("/user/"+t+"/overview")}),onUpdate:e.editUser,onDelete:e.deleteUser,onChange_password:e.updatePassword,onAssign_offices:e.assignOffices},null,8,["item","onUpdate","onDelete","onChange_password","onAssign_offices"])])})),128))]),Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",d,[e.usersList.length>0?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,currentPage:e.page,"onUpdate:currentPage":t[2]||(t[2]=function(t){return e.page=t}),"page-sizes":[Math.round(e.users.length),Math.round(e.users.length/(e.users.length/2)),Math.round(e.users.length/e.users.length)],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.users.length,"page-count":Math.round(e.users.length/e.pageSize),onSizeChange:e.handleSizeChange,onCurrentChange:e.setPage},null,8,["currentPage","page-sizes","page-size","total","page-count","onSizeChange","onCurrentChange"])):Object(n["createCommentVNode"])("",!0)])]),""!==e.typeEvent?(Object(n["openBlock"])(),Object(n["createBlock"])(g,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dialogVisible=t}),width:"70%",onClose:e.resetModal},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{"type-event":e.typeEvent,item:e.element,onSuccess:e.successOperation},null,8,["type-event","item","onSuccess"])]})),_:1},8,["modelValue","onClose"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(g,{modelValue:e.dialogPassword,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.dialogPassword=t}),width:"55%",onClose:e.resetModal},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",u,[Object(n["createVNode"])(V,{item:e.element,onSuccess:t[4]||(t[4]=function(t){return e.dialogPassword=!1})},null,8,["item"])])]})),_:1},8,["modelValue","onClose"]),Object(n["createVNode"])(g,{modelValue:e.dialogOffices,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.dialogOffices=t}),width:"55%",onClose:e.resetModal},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(N,{item:e.element,onSuccess:t[6]||(t[6]=function(t){return e.dialogOffices=!1})},null,8,["item"])])]})),_:1},8,["modelValue","onClose"])],64)}var p=a("fd34"),f=a("16d6");const v={class:"card-xl-stretch mb-xl-8 card"},O={class:"card-body d-flex align-items-center pt-0 pb-0"},j={class:"d-flex flex-column flex-grow-1 py-2 py-lg-8 me-2"},g={href:"javascript:void(0)",class:"fw-bolder text-dark fs-4 text-hover-primary"},V={class:"fw-bold text-muted fs-5"},N={class:"row pt-2"},w={class:"col-12"},E={class:"fs-7 text-muted"},h={class:"fs-6 fw-bolder"},y={class:"row pt-2"},k={class:"col-12"},x={class:"fs-7 text-muted"},C={class:"fs-4 fw-bolder"},_={class:"row pt-2"},U={class:"col-12"},S={class:"fs-7 text-muted"},B={class:"fs-6 fw-bolder"},D={key:0,class:"ms-1 dropdown float-rigth align-self-start"},$={type:"button",class:"btn btn-sm btn-icon btn-color-primary btn-active-light-primary dropdown-toggle float-end",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},L={class:"svg-icon svg-icon-2"},M={class:"dropdown-menu menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-200px","aria-labelledby":"dropdownMenuButton1"},A={key:0,class:"menu-item px-3"},P={key:1,class:"menu-item px-3"},z={key:2,class:"menu-item px-3"},I={key:3,class:"menu-item px-3"},F=["src"],T={class:"d-flex flex-center flex-column"};function R(e,t,a,o,l,c){const r=Object(n["resolveComponent"])("inline-svg");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",v,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("a",g,Object(n["toDisplayString"])(e.item.name),1),Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])(e.item.email),1),Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("div",E,Object(n["toDisplayString"])(e.$t("iborndate")),1),Object(n["createElementVNode"])("div",h,Object(n["toDisplayString"])(e.item.born_date),1)])]),Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",x,Object(n["toDisplayString"])(e.$t("icif")),1),Object(n["createElementVNode"])("div",C,Object(n["toDisplayString"])(e.item.cif_nif),1)])]),Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("div",S,Object(n["toDisplayString"])(e.$t("iphone")),1),Object(n["createElementVNode"])("div",B,Object(n["toDisplayString"])(e.item.phone_number),1)])])]),Object(n["createElementVNode"])("div",null,[e.delete_user||e.update_user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",D,[Object(n["createElementVNode"])("button",$,[Object(n["createElementVNode"])("span",L,[Object(n["createVNode"])(r,{src:"media/icons/duotone/Layout/Layout-4-blocks-2.svg"})])]),Object(n["createElementVNode"])("ul",M,[e.update_user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",A,[Object(n["createElementVNode"])("div",{class:"dropdown-item menu-content fs-6 text-info fw-bolder px-3 py-4",onClick:t[0]||(t[0]=t=>e.$emit("update",e.item))},Object(n["toDisplayString"])(e.$t("btnEdit")),1)])):Object(n["createCommentVNode"])("",!0),e.delete_user?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",P,[Object(n["createElementVNode"])("div",{class:"dropdown-item menu-content fs-6 text-danger fw-bolder px-3 py-4",onClick:t[1]||(t[1]=t=>e.$emit("delete",e.item.id))},Object(n["toDisplayString"])(e.$t("btnDelete")),1)])):Object(n["createCommentVNode"])("",!0),e.update_password?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",z,[Object(n["createElementVNode"])("div",{class:"dropdown-item menu-content fs-6 text-warning fw-bolder px-3 py-4",onClick:t[2]||(t[2]=t=>e.$emit("change_password",e.item.id))},Object(n["toDisplayString"])(e.$t("iupdatepass")),1)])):Object(n["createCommentVNode"])("",!0),e.assign_offices?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",I,[Object(n["createElementVNode"])("div",{class:"dropdown-item menu-content fs-6 text-success fw-bolder px-3 py-4",onClick:t[3]||(t[3]=t=>e.$emit("assign_offices",e.item))},Object(n["toDisplayString"])(e.$t("iassignoffices")),1)])):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("img",{src:e.item.avatar||"/media/defaults/avatar.png",alt:"",class:"align-self-end h-100px w-100px mt-2 rounded"},null,8,F)])]),Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-light-primary fw-bolder py-2 mx-2 px-3 mb-2",onClick:t[4]||(t[4]=t=>e.$emit("profile",e.item.id))},Object(n["toDisplayString"])(e.$t("iprofile")),1)])])}var q=a("0238"),J=a("5c40"),Y=a("a1e9"),G=Object(J["E"])({name:"CardUser",props:{item:Object},setup(){return{delete_user:Object(Y["s"])(Object(q["a"])("users: delete")),update_user:Object(Y["s"])(Object(q["a"])("users: update")),update_password:Object(Y["s"])(Object(q["a"])("users: update password")),assign_offices:Object(Y["s"])(Object(q["a"])("users: assign offices"))}}}),H=a("6b0d"),K=a.n(H);const Q=K()(G,[["render",R]]);var W=Q,X={class:"container"},Z={class:"fw-bolder my-2"},ee=Object(n["createElementVNode"])("span",{class:"fs-6 text-gray-400 fw-bold ms-1"},null,-1),te={class:"bg-white rounded shadow-sm p-10 p-lg-15 mx-auto"},ae={class:"row"},ne={key:0,class:"col-md-6"},oe={class:"form-label fs-6 fw-bolder text-dark"},le={class:"fv-plugins-message-container"},ce={class:"fv-help-block"},re={class:"col-md-6 text-center"},se={class:"image-input image-input-outline","data-kt-image-input":"true",style:{"background-image":"url(media/defaults/blank.png)"}},ie=Object(n["createElementVNode"])("label",{class:"form-label fs-6 fw-bolder text-dark"},"Avatar",-1),de={class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip",title:"Change avatar"},ue=Object(n["createElementVNode"])("i",{class:"bi bi-pencil-fill fs-7"},null,-1),me=Object(n["createElementVNode"])("input",{type:"hidden",name:"avatar_remove"},null,-1),be=Object(n["createElementVNode"])("i",{class:"bi bi-x fs-2"},null,-1),pe=[be],fe=Object(n["createElementVNode"])("div",{class:"form-text"},"Allowed file types: png, jpg, jpeg.",-1),ve={class:"row"},Oe={class:"col-md-6"},je={class:"form-label fs-6 fw-bolder text-dark"},ge={class:"fv-plugins-message-container"},Ve={class:"fv-help-block"},Ne={class:"col-md-6"},we={class:"form-label fs-6 fw-bolder text-dark"},Ee={class:"fv-plugins-message-container"},he={class:"fv-help-block"},ye={class:"row"},ke={class:"col-md-6"},xe={class:"form-label fs-6 fw-bolder text-dark"},Ce={class:"fv-plugins-message-container"},_e={class:"fv-help-block"},Ue={class:"col-md-6"},Se={class:"form-label fs-6 fw-bolder text-dark"},Be={class:"fv-plugins-message-container"},De={class:"fv-help-block"},$e={class:"row"},Le={class:"col-md-6"},Me={class:"form-label fs-6 fw-bolder text-dark"},Ae={class:"fv-plugins-message-container"},Pe={class:"fv-help-block"},ze={class:"col-md-6"},Ie={class:"form-label fs-6 fw-bolder text-dark"},Fe={class:"fv-plugins-message-container"},Te={class:"fv-help-block"},Re={class:"row"},qe={class:"col-md-12"},Je={class:"text-center"},Ye={ref:"submitButton",type:"submit",class:"btn btn-lg btn-primary mb-5"},Ge={class:"indicator-label"},He={class:"indicator-progress"},Ke=Object(n["createElementVNode"])("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function Qe(e,t,a,o,l,c){var r=Object(n["resolveComponent"])("el-option"),s=Object(n["resolveComponent"])("el-select"),i=Object(n["resolveComponent"])("ErrorMessage"),d=Object(n["resolveComponent"])("Field"),u=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",X,[Object(n["createElementVNode"])("h3",Z,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.title)+" ",1),ee]),Object(n["createElementVNode"])("div",te,[Object(n["createVNode"])(u,{id:"UserCU",class:"form w-100","validation-schema":e.vusers,onSubmit:e.onSubmitUser},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ae,["usersUpdate"===e.route.name?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ne,[Object(n["createElementVNode"])("label",oe,Object(n["toDisplayString"])(e.$t("iid")),1),Object(n["createVNode"])(s,{modelValue:e.form.id,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.form.id=t}),class:"form-control form-control-lg form-control-solid",filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter a keyword","remote-method":e.selectUser,loading:e.inputId.loading,onChange:e.setUser},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.inputId.options,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:e.id,label:e.id.toString(),value:e.id},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.id+" "+e.name),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue","remote-method","loading","onChange"]),Object(n["createElementVNode"])("div",le,[Object(n["createElementVNode"])("div",ce,[Object(n["createVNode"])(i,{name:"id"})])])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",re,[Object(n["createElementVNode"])("div",se,[Object(n["createElementVNode"])("div",{class:"image-input-wrapper w-125px h-125px",style:Object(n["normalizeStyle"])(e.form.avatar?"background-image: url("+e.form.avatar+")":"background-image: url(media/defaults/blank.png)")},null,4),ie,Object(n["createElementVNode"])("label",de,[ue,Object(n["createElementVNode"])("input",{type:"file",name:"avatar",accept:".png, .jpg, .jpeg",onChange:t[1]||(t[1]=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return e.previewImage&&e.previewImage.apply(e,t)})},null,32),me]),Object(n["createElementVNode"])("span",{class:"btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-white shadow","data-kt-image-input-action":"remove","data-bs-toggle":"tooltip",title:"Remove avatar",onClick:t[2]||(t[2]=function(t){return e.removeImage("avatar")})},pe)]),fe])]),Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("div",Oe,[Object(n["createElementVNode"])("label",je,Object(n["toDisplayString"])(e.$t("iname")),1),Object(n["createVNode"])(d,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.name=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("div",Ve,[Object(n["createVNode"])(i,{name:"name"})])])]),Object(n["createElementVNode"])("div",Ne,[Object(n["createElementVNode"])("label",we,Object(n["toDisplayString"])(e.$t("iborndate")),1),Object(n["createVNode"])(d,{modelValue:e.form.born_date,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.born_date=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"born_date",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",Ee,[Object(n["createElementVNode"])("div",he,[Object(n["createVNode"])(i,{name:"born_date"})])])])]),Object(n["createElementVNode"])("div",ye,[Object(n["createElementVNode"])("div",ke,[Object(n["createElementVNode"])("label",xe,Object(n["toDisplayString"])(e.$t("iphone")),1),Object(n["createVNode"])(d,{modelValue:e.form.phone_number,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.phone_number=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"phone_number",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",Ce,[Object(n["createElementVNode"])("div",_e,[Object(n["createVNode"])(i,{name:"phone_number"})])])]),Object(n["createElementVNode"])("div",Ue,[Object(n["createElementVNode"])("label",Se,Object(n["toDisplayString"])(e.$t("icif")),1),Object(n["createVNode"])(d,{modelValue:e.form.cif_nif,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.cif_nif=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"cif_nif",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",Be,[Object(n["createElementVNode"])("div",De,[Object(n["createVNode"])(i,{name:"cif_nif"})])])])]),Object(n["createElementVNode"])("div",$e,[Object(n["createElementVNode"])("div",Le,[Object(n["createElementVNode"])("label",Me,Object(n["toDisplayString"])(e.$t("iemail")),1),Object(n["createVNode"])(d,{modelValue:e.form.email,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.email=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",Ae,[Object(n["createElementVNode"])("div",Pe,[Object(n["createVNode"])(i,{name:"email"})])])]),Object(n["createElementVNode"])("div",ze,[Object(n["createElementVNode"])("label",Ie,Object(n["toDisplayString"])(e.$t("ipassword")),1),Object(n["createVNode"])(d,{modelValue:e.form.password,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.password=t}),class:"form-control form-control-lg form-control-solid",type:"text",name:"password",autocomplete:"off"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",Fe,[Object(n["createElementVNode"])("div",Te,[Object(n["createVNode"])(i,{name:"password"})])])])]),Object(n["createElementVNode"])("div",Re,[Object(n["createElementVNode"])("div",qe,[Object(n["createElementVNode"])("div",Je,[Object(n["createElementVNode"])("button",Ye,[Object(n["createElementVNode"])("span",Ge,Object(n["toDisplayString"])(e.$t("btnSave")),1),Object(n["createElementVNode"])("span",He,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("wait"))+" ",1),Ke])],512)])])])]})),_:1},8,["validation-schema","onSubmit"])])])}var We=a("7bb1"),Xe=a("506a"),Ze=a("6c02"),et=Object(n["defineComponent"])({name:"UsersCU",components:{Field:We["b"],Form:We["c"],ErrorMessage:We["a"]},props:{typeEvent:String,item:Object},setup:function(e,t){var a,o=t.emit,l=Object(Ze["c"])(),c=Object(n["ref"])(null),r=Object(n["ref"])(""),s=Object(n["ref"])({name:"",born_date:"",phone_number:"",cif_nif:"",email:"",password:"",avatar:""}),i=Object(n["ref"])({loading:!1,options:[],list:[]}),d=function(){f["a"].get("/api/users").then((function(e){var t=e.data;i.value.list=t}))},u=function(e){""!==e?(i.value.loading=!0,setTimeout((function(){i.value.loading=!1,i.value.options=i.value.list.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}))}),200)):i.value.options=[]},m=function(e){var t=i.value.list.find((function(t){return t.id===e}))||{id:"",name:"",born_date:"",phone_number:"",cif_nif:"",email:"",password:"",avatar:""};s.value.name=t.name,s.value.born_date=t.born_date,s.value.cif_nif=t.cif_nif,s.value.email=t.email,s.value.password=t.password,s.value.avatar=t.avatar},b=function(e){var t=e.target.files[0];t&&(s.value[e.target.name]=URL.createObjectURL(t),"avatar"===e.target.name&&(a=e.target.files[0]))},v=function(e){s.value[e]="media/defaults/blank.png","avatar"===e&&(a="")};Object(n["onMounted"])((function(){var t=l.name;if("userCreate"===t||"create"===e.typeEvent?r.value="Crear un nuevo usuario":"usersUpdate"!==t&&"update"!==e.typeEvent||(r.value="Actualizar usuario"),e.item&&Object.keys(e.item).length>0&&(s.value.id=e.item.id,s.value.name=e.item.name,s.value.born_date=e.item.born_date||"",s.value.phone_number=e.item.phone_number||"",s.value.cif_nif=e.item.cif_nif||"",s.value.email=e.item.email||"",s.value.password=e.item.password||"",s.value.avatar=e.item.avatar),"usersUpdate"===t&&d(),!e.typeEvent){var a="userCreate"==t?"userCreate":"usersUpdate";Object(p["a"])(a,["user","user"],!1)}}));var O=function(){var e=new FormData;e.append("name",s.value.name),e.append("email",s.value.email),e.append("password",s.value.password),e.append("avatar",a),f["a"].postAttach("/api/users",e).then((function(e){var t,a=e.data;o("success",a),null===(t=c.value)||void 0===t||t.removeAttribute("data-kt-indicator")})).catch((function(){var e;null===(e=c.value)||void 0===e||e.removeAttribute("data-kt-indicator")}))},j=function(){var e=new FormData;e.append("name",s.value.name),e.append("email",s.value.email),e.append("avatar",a),f["a"].postAttach("/api/users/update/"+s.value.id,e).then((function(e){var t,a=e.data;o("success",a),null===(t=c.value)||void 0===t||t.removeAttribute("data-kt-indicator")})).catch((function(){var e;null===(e=c.value)||void 0===e||e.removeAttribute("data-kt-indicator")}))},g=Xe["a"]().shape({name:Xe["c"]().required(Object(q["c"])("rname")).label("Name"),cif_nif:Xe["c"]().required().label("cif_nif/NIF"),email:Xe["c"]().required().email().label("Email"),password:Xe["c"]().required()}),V=function(){c.value&&(c.value.setAttribute("data-kt-indicator","on"),s.value.id?j():O())};return{route:l,title:r,submitButton:c,vusers:g,form:s,avatar:a,onSubmitUser:V,createUser:O,updateUser:j,inputId:i,getUsers:d,selectUser:u,setUser:m,previewImage:b,removeImage:v}}});const tt=K()(et,[["render",Qe]]);var at=tt,nt=a("b471");function ot(e,t){return"Offices"}const lt={},ct=K()(lt,[["render",ot]]);var rt=ct,st=a("0241"),it=a.n(st),dt=a("5502"),ut=Object(n["defineComponent"])({name:"ManagementUsers",components:{CardUser:W,UserCU:at,ChangePassword:nt["a"],Offices:rt},setup:function(){var e=Object(dt["b"])(),t=Object(n["ref"])([]),a=Object(n["ref"])(""),o=Object(n["ref"])(!1),l=Object(n["ref"])(!1),c=Object(n["ref"])(!1),r=Object(n["ref"])({}),s=Object(n["ref"])(1),i=Object(n["ref"])(1),d=function(){f["a"].get("/api/users").then((function(e){var a=e.data;t.value=a,i.value=t.value.length}))},u=function(){a.value="create",o.value=!0},m=function(e){r.value=e,a.value="update",o.value=!0},b=function(e){it.a.fire({text:"Esta seguro que desea eliminar a este usuario",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",customClass:{confirmButton:"btn fw-bold btn-light-danger",cancelButton:"btn fw-bold btn-light-primary"}}).then((function(a){a.isConfirmed&&f["a"].delete("/api/users/"+e).then((function(){var a=t.value.findIndex((function(t){return t.id===e}));t.value.splice(a,1)}))}))},v=function(e){l.value=!0,r.value={user_id:e}},O=function(e){c.value=!0,r.value=e},j=function(e){var a=t.value.findIndex((function(t){return t.id===e.id}));a>=0?t.value[a]=e:t.value.push(e),o.value=!1},g=function(){a.value="",r.value={}},V=function(e){s.value=1,i.value=e},N=function(e){s.value=e},w=Object(n["computed"])((function(){if(""===e.getters.searchLocal)return t.value.slice(i.value*s.value-i.value,i.value*s.value)||[];var a=t.value.filter((function(t){return t.name.toLowerCase().includes(e.getters.searchLocal.toLowerCase())||t.email.toLowerCase().includes(e.getters.searchLocal.toLowerCase())}));return a.slice(i.value*s.value-i.value,i.value*s.value)||[]}));return Object(n["onMounted"])((function(){Object(p["a"])("usersIndex",["user"],!0),d()})),{newUser:u,editUser:m,deleteUser:b,successOperation:j,resetModal:g,handleSizeChange:V,setPage:N,create_user:Object(n["ref"])(Object(q["a"])("users: create")),users:t,usersList:w,typeEvent:a,dialogVisible:o,dialogPassword:l,updatePassword:v,dialogOffices:c,assignOffices:O,element:r,page:s,pageSize:i}}});const mt=K()(ut,[["render",b]]);t["default"]=mt},fd34:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));var n=a("0613"),o=a("38e0"),l=function(e,t,a){n["a"].dispatch(o["a"].SET_BREADCRUMB_ACTION,{title:e,pageBreadcrumbPath:t,isSearch:a||!1})},c=function(e){n["a"].dispatch(o["a"].SET_BREADCRUMB_ACTION,{title:e})}}}]);
//# sourceMappingURL=chunk-1dc55480.b0aebc85.js.map